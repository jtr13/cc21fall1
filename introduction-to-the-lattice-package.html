<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Introduction to the lattice package | EDAV Fall 2021 Mon/Wed Community Contributions</title>
<meta name="author" content="the students of the class">
<meta name="description" content="Eubin Park library(lattice) library(car) The lattice package is a data visualization package created by Deepayan Sarkar. It is an add-on package that improves the defaults on base R, with an...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 5 Introduction to the lattice package | EDAV Fall 2021 Mon/Wed Community Contributions">
<meta property="og:type" content="book">
<meta property="og:description" content="Eubin Park library(lattice) library(car) The lattice package is a data visualization package created by Deepayan Sarkar. It is an add-on package that improves the defaults on base R, with an...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 Introduction to the lattice package | EDAV Fall 2021 Mon/Wed Community Contributions">
<meta name="twitter:description" content="Eubin Park library(lattice) library(car) The lattice package is a data visualization package created by Deepayan Sarkar. It is an add-on package that improves the defaults on base R, with an...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><script src="libs/d3-5.16.0/d3.min.js"></script><script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script><link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet">
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script><script src="libs/detect-resize-0.5.3/jquery.resize.js"></script><link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet">
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script><script src="libs/vega-1.4.3/vega.min.js"></script><script src="libs/lodash-2.2.1/lodash.min.js"></script><script>var lodash = _.noConflict();</script><link href="libs/ggvis-0.4.7/css/ggvis.css" rel="stylesheet">
<script src="libs/ggvis-0.4.7/js/ggvis.js"></script><script src="libs/dendroNetwork-binding-0.4/dendroNetwork.js"></script><link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet">
<script src="libs/str_view-binding-1.4.0/str_view.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">EDAV Fall 2021 Mon/Wed Community Contributions</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Data Visualizations</li>
<li><a class="active" href="introduction-to-the-lattice-package.html"><span class="header-section-number">5</span> Introduction to the lattice package</a></li>
<li><a class="" href="graph-animation-with-gganimate-and-after-effects.html"><span class="header-section-number">6</span> Graph animation with gganimate and After Effects</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">7</span> Interactive Plots</a></li>
<li><a class="" href="create-regression-assumption-plots-in-word.html"><span class="header-section-number">8</span> Create regression assumption plots in Word</a></li>
<li><a class="" href="from-neo4j-to-rstudio.html"><span class="header-section-number">9</span> From Neo4j to RStudio</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="r-vs.-python-visualization-cheatsheet.html"><span class="header-section-number">10</span> R vs. Python Visualization Cheatsheet</a></li>
<li><a class="" href="rpackage-waffle-cheatsheet.html"><span class="header-section-number">11</span> Rpackage waffle cheatsheet</a></li>
<li><a class="" href="r-cheatsheet-on-data-transforamtion-and-exploration.html"><span class="header-section-number">12</span> R cheatsheet on data transforamtion and exploration</a></li>
<li><a class="" href="r-vs-python-basic-data-wrangling.html"><span class="header-section-number">13</span> R vs Python Basic Data Wrangling</a></li>
<li><a class="" href="tidyverse_cheatsheet.html"><span class="header-section-number">14</span> tidyverse_cheatsheet</a></li>
<li><a class="" href="cheatsheet-tidyverse.html"><span class="header-section-number">15</span> Cheatsheet Tidyverse</a></li>
<li><a class="" href="use-of-ggprism-and-ggsci-packages.html"><span class="header-section-number">16</span> Use of ggprism and ggsci packages</a></li>
<li><a class="" href="interactive-plot-introduction.html"><span class="header-section-number">17</span> Interactive plot introduction</a></li>
<li><a class="" href="common-r-markdown-syntax-cheatsheet.html"><span class="header-section-number">18</span> Common R markdown syntax cheatsheet</a></li>
<li><a class="" href="header.html"><span class="header-section-number">19</span> Header</a></li>
<li><a class="" href="parallel-coordinates-plot-cheatsheet.html"><span class="header-section-number">20</span> Parallel coordinates plot cheatsheet</a></li>
<li><a class="" href="r-data-science-workflow-cheatsheet.html"><span class="header-section-number">21</span> R Data Science Workflow CheatSheet</a></li>
<li><a class="" href="a-linear-regression-bestiary.html"><span class="header-section-number">22</span> A linear regression Bestiary</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="multithreading-crawler-frame.html"><span class="header-section-number">23</span> Multithreading Crawler Frame</a></li>
<li><a class="" href="regression-and-classification-in-r.html"><span class="header-section-number">24</span> Regression and Classification in R</a></li>
<li><a class="" href="tibble-vs.-dataframe.html"><span class="header-section-number">25</span> Tibble vs. DataFrame</a></li>
<li><a class="" href="introduction-to-time-series.html"><span class="header-section-number">26</span> Introduction to Time Series</a></li>
<li><a class="" href="vipul-edav-community-contribution-kickstart-r.html"><span class="header-section-number">27</span> Vipul EDAV Community Contribution Kickstart R</a></li>
<li><a class="" href="caret---a-machine-learning-package-turotial.html"><span class="header-section-number">28</span> caret - a machine learning package turotial</a></li>
<li><a class="" href="streamlit-for-financial-analysis.html"><span class="header-section-number">29</span> Streamlit for Financial Analysis</a></li>
<li><a class="" href="interactive-graphs-tutorial.html"><span class="header-section-number">30</span> Interactive graphs tutorial</a></li>
<li><a class="" href="guideline-on-using-package-rcurl-and-xml-for-web-scraping.html"><span class="header-section-number">31</span> Guideline on Using Package Rcurl and XML for Web Scraping</a></li>
<li><a class="" href="twitter-r-package-scraping-via-api-tutorial.html"><span class="header-section-number">32</span> TwitteR R Package Scraping via API Tutorial</a></li>
<li><a class="" href="introduction-to-data-manipulation.html"><span class="header-section-number">33</span> Introduction to Data Manipulation</a></li>
<li><a class="" href="animating-the-plots-in-r.html"><span class="header-section-number">34</span> Animating the plots in R</a></li>
<li><a class="" href="quick-guide-to-eda.html"><span class="header-section-number">35</span> Quick guide to eda</a></li>
<li><a class="" href="natural-langauge-processing-common-eda-practices-in-python.html"><span class="header-section-number">36</span> Natural Langauge Processing Common EDA Practices in Python</a></li>
<li><a class="" href="beginners-walk-through-of-deep-learning-in-r.html"><span class="header-section-number">37</span> Beginner’s Walk-through of Deep Learning in R</a></li>
<li><a class="" href="supervised-learning-tutorial.html"><span class="header-section-number">38</span> Supervised Learning Tutorial</a></li>
<li><a class="" href="parallel-coordinate-plots-in-ggplot2.html"><span class="header-section-number">39</span> Parallel Coordinate Plots in ggplot2</a></li>
<li><a class="" href="using-ggplot-in-python.html"><span class="header-section-number">40</span> Using ggplot in python</a></li>
<li class="book-part">Demonstrations</li>
<li><a class="" href="linear-association-r-studio-plugin.html"><span class="header-section-number">41</span> Linear Association R Studio Plugin</a></li>
<li><a class="" href="customized-sorting-in-r.html"><span class="header-section-number">42</span> Customized Sorting in R</a></li>
<li class="book-part">Workshops</li>
<li><a class="" href="data-science-product-cycles-in-enterprises.html"><span class="header-section-number">43</span> Data Science Product Cycles in Enterprises</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">44</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">45</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc21fall1">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="introduction-to-the-lattice-package" class="section level1">
<h1>
<span class="header-section-number">5</span> Introduction to the lattice package<a class="anchor" aria-label="anchor" href="#introduction-to-the-lattice-package"><i class="fas fa-link"></i></a>
</h1>
<p>Eubin Park</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://lattice.r-forge.r-project.org/">lattice</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-forge.r-project.org/projects/car/">car</a></span><span class="op">)</span></code></pre></div>
<p>The lattice package is a data visualization package created by Deepayan Sarkar. It is an add-on package that improves the defaults on base R, with an emphasis on displaying <strong>multivariate data</strong> - supporting the creation of trellis graphs. The strength of the lattice package is mainly from its ability to manage dependent data.</p>
<p>The general format of plotting using lattice functions is: <strong>graph_type(formula, data)</strong>. The main workhorse function in the lattice package is <code><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot()</a></code>.</p>
<div id="producing-a-plot-in-lattice" class="section level2">
<h2>
<span class="header-section-number">5.1</span> Producing a Plot in Lattice<a class="anchor" aria-label="anchor" href="#producing-a-plot-in-lattice"><i class="fas fa-link"></i></a>
</h2>
<p>We can begin by creating the most basic of all plots in Lattice - a scatterplot. In Lattice, this is done by using the xyplot. In this example, we will use the iris dataset.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span>, data <span class="op">=</span> <span class="va">iris</span>,
       xlab <span class="op">=</span> <span class="st">"Sepal Width"</span>,
       ylab <span class="op">=</span> <span class="st">"Sepal Length"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;"></div>
<p>This type of scatterplot should be very familiar to many. As seen above, we can see that the basic method of plotting using <code><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot()</a></code> is through the symbolic formula <code>y ~ x</code>, where <code>x</code> is the independent variable and <code>y</code> is the dependent variable.</p>
</div>
<div id="plotting-by-groups" class="section level2">
<h2>
<span class="header-section-number">5.2</span> Plotting by Groups<a class="anchor" aria-label="anchor" href="#plotting-by-groups"><i class="fas fa-link"></i></a>
</h2>
<p>There are 2 main ways of going about plotting multivariate data in lattice.</p>
<p><strong>1. Superposition:</strong>
All data is plotted in the same region of the graph, but distinct groups are able to be categorized by varying plot features such as color, shapes, etc. To use superposition in plots, the <strong>groups</strong> argument must be specified.</p>
<p><strong>2. Juxtaposition:</strong>
Data is plotted in separate regions of a larger graph. To use juxtaposition in plots, one must specify a <strong>conditioning statement</strong>, such as: <code>y ~ x | z</code>, where <code>z</code> is the conditioning variable.</p>
<p>The difference between superposition and juxtaposition can be shown below:</p>
<p>Superposition:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span>, data<span class="op">=</span><span class="va">iris</span>, 
       groups<span class="op">=</span><span class="va">iris</span><span class="op">$</span><span class="va">Species</span>, <span class="co"># use groups argument</span>
       auto.key<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>text<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"setosa"</span>, <span class="st">"versicolor"</span>, <span class="st">"virginica"</span><span class="op">)</span><span class="op">)</span>,
       xlab <span class="op">=</span> <span class="st">"Sepal Width"</span>,
       ylab <span class="op">=</span> <span class="st">"Sepal Length"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;"></div>
<p>Juxtaposition:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span> <span class="op">|</span> <span class="va">Species</span>, data<span class="op">=</span><span class="va">iris</span>, <span class="co"># add conditioning statement</span>
       pch<span class="op">=</span><span class="fl">1</span>, col<span class="op">=</span><span class="st">"black"</span>,
       xlab <span class="op">=</span> <span class="st">"Sepal Width"</span>,
       ylab <span class="op">=</span> <span class="st">"Sepal Length"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;"></div>
<p>As seen above, the only real difference in plotting the two graphs is whether one uses the groups argument (Supposition) or conditioning statement (Juxtaposition), but Lattice is able to create two very different graphs with this small difference.</p>
<p>There are many problems with the supposition plot above that the juxtaposition plot overcomes. For example, there is a good deal of over-plotting in the first plot, and as a result it is difficult to distinguish clear trends within each species group. However, these problems are not seen in the juxtaposition plot.</p>
<p>This sort of advanrage becomes much more conspicuous when dealing with larger multivariate datasets. In this next example, we will use the quakes dataset.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">quakes</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create shingles</span>
<span class="va">Depth</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/shingles.html">equal.count</a></span><span class="op">(</span><span class="va">quakes</span><span class="op">$</span><span class="va">depth</span>, number <span class="op">=</span> <span class="fl">8</span>, overlap <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>

<span class="co"># Plot graph using supposition</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">~</span> <span class="va">long</span>, data <span class="op">=</span> <span class="va">quakes</span>,
       groups <span class="op">=</span> <span class="va">Depth</span>,
       xlab <span class="op">=</span> <span class="st">"Longitude"</span>,
       ylab <span class="op">=</span> <span class="st">"Latitude"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;"></div>
<p>In the above example, we have created <strong>shingles</strong> in order to essentially bin the data. Each shingle contains the data from some subset of the variable it is being created from.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plot graph using juxtaposition</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">~</span> <span class="va">long</span> <span class="op">|</span> <span class="va">Depth</span>, data <span class="op">=</span> <span class="va">quakes</span>,
       xlab <span class="op">=</span> <span class="st">"Longtitude"</span>,
       ylab <span class="op">=</span> <span class="st">"Latitude"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;"></div>
<p>In this example, it is clear to see the advantages of using the juxtaposition method of plotting.</p>
<p>If we want to re-arrange the panels in the above plot, we can use the <code>layout</code> argument. This argument takes a vector of three values: number of rows, number of columns, and number of pages.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use layout argument</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">~</span> <span class="va">long</span> <span class="op">|</span> <span class="va">Depth</span>, data <span class="op">=</span> <span class="va">quakes</span>,
       layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
       xlab <span class="op">=</span> <span class="st">"Longtitude"</span>,
       ylab <span class="op">=</span> <span class="st">"Latitude"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-10-1.png" width="672" style="display: block; margin: auto;"></div>
<p>However, by using this argument, we have skewed the shapes of the plots. We can fix this using the <code>aspect</code> argument, which controls the ratio of the plots.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use aspect argument</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">~</span> <span class="va">long</span> <span class="op">|</span> <span class="va">Depth</span>, data <span class="op">=</span> <span class="va">quakes</span>,
       aspect <span class="op">=</span> <span class="fl">1</span>,
       layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
       xlab <span class="op">=</span> <span class="st">"Longtitude"</span>,
       ylab <span class="op">=</span> <span class="st">"Latitude"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;"></div>
<p>If we wanted to fit regression lines into each panel, we can use the panel function argument of the <code>xyplot</code> function.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use the panel function argument</span>
<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">~</span> <span class="va">long</span> <span class="op">|</span> <span class="va">Depth</span>, data <span class="op">=</span> <span class="va">quakes</span>,
       panel <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">subscripts</span>,<span class="va">...</span><span class="op">)</span><span class="op">{</span>
           <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/llines.html">panel.points</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">...</span><span class="op">)</span>
           <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.functions.html">panel.lmline</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">...</span><span class="op">)</span> <span class="op">}</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto;"></div>
</div>
<div id="histograms-and-density-plots" class="section level2">
<h2>
<span class="header-section-number">5.3</span> Histograms and Density Plots<a class="anchor" aria-label="anchor" href="#histograms-and-density-plots"><i class="fas fa-link"></i></a>
</h2>
<p>Lattice offers other options too, such as histograms and density plots. In this example, we will use the Duncan dataset from the car package.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">Duncan</span><span class="op">)</span></code></pre></div>
<p>To make a histogram with the lattice package, use the <code><a href="https://rdrr.io/pkg/lattice/man/histogram.html">histogram()</a></code> function.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/histogram.html">histogram</a></span><span class="op">(</span><span class="op">~</span> <span class="va">prestige</span>, data<span class="op">=</span><span class="va">Duncan</span>, 
          type<span class="op">=</span><span class="st">"count"</span>, <span class="co"># can take 'count', 'percent', or 'density'</span>
          nint <span class="op">=</span> <span class="fl">10</span>, <span class="co"># number of bins</span>
          endpoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>
          <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;"></div>
<p>To make a density plot with lattice package, use the <code><a href="https://rdrr.io/pkg/lattice/man/histogram.html">densityplot()</a></code> function.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/histogram.html">densityplot</a></span><span class="op">(</span><span class="op">~</span> <span class="va">prestige</span>, data <span class="op">=</span> <span class="va">Duncan</span>,
            col <span class="op">=</span> <span class="st">"black"</span>,
            plot.points <span class="op">=</span> <span class="cn">F</span> <span class="co"># specify whether to have data points</span>
            <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-15-1.png" width="672" style="display: block; margin: auto;"></div>
<p>We can even combine histograms and density plots using the panel function argument. While doing so, we can split the data into separate panels, which is useful for multivariate data.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">Duncan</span>, <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/histogram.html">do.breaks</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">xyplot</a></span><span class="op">(</span><span class="op">~</span><span class="va">income</span> <span class="op">|</span> <span class="va">type</span>, data<span class="op">=</span><span class="va">Duncan</span>,
       xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.04</span><span class="op">)</span>,
       panel <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
           <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.histogram.html">panel.histogram</a></span><span class="op">(</span><span class="va">x</span>, 
                           breaks <span class="op">=</span> <span class="va">b</span>, 
                           col<span class="op">=</span><span class="st">"gray80"</span><span class="op">)</span>
           <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.densityplot.html">panel.densityplot</a></span><span class="op">(</span><span class="va">x</span>, 
                             darg <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">100</span><span class="op">)</span>,
                             col<span class="op">=</span><span class="st">"red"</span>,
                             lwd<span class="op">=</span><span class="fl">1.5</span>,
                             plot.points<span class="op">=</span><span class="cn">F</span><span class="op">)</span>
       <span class="op">}</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-16-1.png" width="672" style="display: block; margin: auto;"></div>
</div>
<div id="boxplots-violinplots-and-dotplots" class="section level2">
<h2>
<span class="header-section-number">5.4</span> Boxplots, Violinplots, and Dotplots<a class="anchor" aria-label="anchor" href="#boxplots-violinplots-and-dotplots"><i class="fas fa-link"></i></a>
</h2>
<p>Some other options offered by the Lattice package include boxplots and dotplots. In this example, we will use the ToothGrowth dataset.</p>
<p>To make a boxplot, use the <code><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">bwplot()</a></code> function. As always with the lattice package, you can use a conditioning statement to create juxtaposing panels.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">bwplot</a></span><span class="op">(</span><span class="va">len</span> <span class="op">~</span> <span class="va">supp</span> <span class="op">|</span> <span class="va">dose</span>,  data <span class="op">=</span> <span class="va">ToothGrowth</span>,
       layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
        xlab <span class="op">=</span> <span class="st">"Dose"</span>, ylab <span class="op">=</span> <span class="st">"Length"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-17-1.png" width="672" style="display: block; margin: auto;"></div>
<p>To make a violin plot, use the <code><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">bwplot()</a></code> function and specify the <code>panel</code> argument.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">bwplot</a></span><span class="op">(</span><span class="va">len</span> <span class="op">~</span> <span class="va">supp</span> <span class="op">|</span> <span class="va">dose</span>,  data <span class="op">=</span> <span class="va">ToothGrowth</span>,
       layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, 
       panel <span class="op">=</span> <span class="va">panel.violin</span>, <span class="co"># specify panel argument to make violin plot</span>
        xlab <span class="op">=</span> <span class="st">"Dose"</span>, ylab <span class="op">=</span> <span class="st">"Length"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto;"></div>
<p>To make a dotplot, use the <code><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">dotplot()</a></code> function.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html">dotplot</a></span><span class="op">(</span><span class="va">len</span> <span class="op">~</span> <span class="va">supp</span> <span class="op">|</span> <span class="va">dose</span>,  data <span class="op">=</span> <span class="va">ToothGrowth</span>,
       layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
        xlab <span class="op">=</span> <span class="st">"Dose"</span>, ylab <span class="op">=</span> <span class="st">"Length"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;"></div>
</div>
<div id="trivariate-plots" class="section level2">
<h2>
<span class="header-section-number">5.5</span> Trivariate Plots<a class="anchor" aria-label="anchor" href="#trivariate-plots"><i class="fas fa-link"></i></a>
</h2>
<p>One option when displaying trivariate continuous data is to utilize all 3 axes. This can be done with a three-dimensional scatterplot.</p>
<p>In the lattice package, one can create such a plot using the <code><a href="https://rdrr.io/pkg/lattice/man/cloud.html">cloud()</a></code> function. This function takes in a symbolic formula as its first argument, in the form: <code>z ~ x * y</code>, where x, z, and y are the three continuous variables.</p>
<p>In this example we will use the quakes dataset again.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/cloud.html">cloud</a></span><span class="op">(</span><span class="va">depth</span> <span class="op">~</span> <span class="va">lat</span> <span class="op">*</span> <span class="va">long</span>, data<span class="op">=</span><span class="va">quakes</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-20-1.png" width="672" style="display: block; margin: auto;"></div>
<p>To view the data from a different perspective, you can rotate the plot using the <code>screen</code> argument. You can play with this feature until you find the best view of your data.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/cloud.html">cloud</a></span><span class="op">(</span><span class="va">depth</span> <span class="op">~</span> <span class="va">lat</span> <span class="op">*</span> <span class="va">long</span>, data<span class="op">=</span><span class="va">quakes</span>,
      screen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>z <span class="op">=</span> <span class="fl">105</span>, x <span class="op">=</span> <span class="op">-</span><span class="fl">70</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="intro_lattice_tutorial_files/figure-html/unnamed-chunk-21-1.png" width="672" style="display: block; margin: auto;"></div>
<p>Unfortunately, interactive options are not available in the Lattice package.</p>
</div>
<div id="pros-and-cons-of-lattice" class="section level2">
<h2>
<span class="header-section-number">5.6</span> Pros and Cons of Lattice<a class="anchor" aria-label="anchor" href="#pros-and-cons-of-lattice"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have a basic overview of the kinds of things the lattice package can do, let’s discuss some of the advantages and disadvantages of this data visualization package.</p>
<p>Pros:</p>
<ul>
<li>Very good at allowing one to visualize multivariate data, i.e. comparing how some variable y changes with some variable x across levels of some other variable z</li>
<li>Many settings set automatically because the entire plot is created at once.</li>
</ul>
<p>Cons:</p>
<ul>
<li>Can be difficult to flesh out an entire plot in one method call</li>
<li>Cannot add more elements to a plot once it is created; it has to be modified.</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></div>
<div class="next"><a href="graph-animation-with-gganimate-and-after-effects.html"><span class="header-section-number">6</span> Graph animation with gganimate and After Effects</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#introduction-to-the-lattice-package"><span class="header-section-number">5</span> Introduction to the lattice package</a></li>
<li><a class="nav-link" href="#producing-a-plot-in-lattice"><span class="header-section-number">5.1</span> Producing a Plot in Lattice</a></li>
<li><a class="nav-link" href="#plotting-by-groups"><span class="header-section-number">5.2</span> Plotting by Groups</a></li>
<li><a class="nav-link" href="#histograms-and-density-plots"><span class="header-section-number">5.3</span> Histograms and Density Plots</a></li>
<li><a class="nav-link" href="#boxplots-violinplots-and-dotplots"><span class="header-section-number">5.4</span> Boxplots, Violinplots, and Dotplots</a></li>
<li><a class="nav-link" href="#trivariate-plots"><span class="header-section-number">5.5</span> Trivariate Plots</a></li>
<li><a class="nav-link" href="#pros-and-cons-of-lattice"><span class="header-section-number">5.6</span> Pros and Cons of Lattice</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc21fall1/blob/main/intro_lattice_tutorial.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc21fall1/edit/main/intro_lattice_tutorial.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>EDAV Fall 2021 Mon/Wed Community Contributions</strong>" was written by the students of the class. It was last built on 2021-11-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
